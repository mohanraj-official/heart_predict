<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Smart Health Predictor</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
#themeToggle {
  position: fixed;
  top: 20px;
  right: 20px;
  z-index: 1100;
  background: #f0f0f0;
  border: none;
  border-radius: 50%;
  padding: 10px 14px;
  font-size: 20px;
  cursor: pointer;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
  transition: background 0.3s ease;
}

#themeToggle:hover {
  background: #ddd;
}

/* ==========================
   Dark Mode Styling
========================== */
body.dark-mode {
  background: linear-gradient(135deg, #2c3e50, #34495e);
  color: #ecf0f1;
}

body.dark-mode .form-container {
  background: #2c3e50;
  color: #ecf0f1;
}

body.dark-mode input,
body.dark-mode select {
  background-color: #3d566e;
  color: white;
  border-color: #555;
}

body.dark-mode input::placeholder {
  color: #ccc;
}

body.dark-mode button {
  background-color: #1abc9c;
}

body.dark-mode button:hover {
  background-color: #16a085;
}

body.dark-mode .modal-content {
  background-color: #3b3b3b;
  color: #f1f1f1;
}

/* ==========================
   Modal Styles
========================== */
.modal {
  display: none;
  position: fixed;
  z-index: 1000;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.5);
  align-items: center;
  justify-content: center;
}

.modal-content {
  background-color: white;
  color: #333;
  padding: 20px 30px;
  border-radius: 12px;
  text-align: center;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
  max-width: 400px;
  width: 90%;
}

.close-btn {
  float: right;
  font-size: 1.5em;
  cursor: pointer;
  color: #888;
}

.close-btn:hover {
  color: #000;
}

/* ==========================
   Body & Container
========================== */
body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  background: linear-gradient(135deg, #f5f7fa, #c3cfe2);
  color: #2c3e50;
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 100vh;
  margin: 0;
}

.form-container {
  background: white;
  padding: 40px;
  border-radius: 20px;
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
  max-width: 700px;
  width: 100%;
  animation: fadeIn 0.8s ease;
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* ==========================
   Form Styling
========================== */
h2 {
  text-align: center;
  margin-bottom: 25px;
  color: #34495e;
}

.form-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(170px, 1fr));
  gap: 15px;
}

.form-grid > div {
  display: flex;
  flex-direction: column;
}

label {
  font-weight: bold;
  margin-bottom: 6px;
  display: block;
}

input,
select {
  width: 100%;
  padding: 10px;
  border: 1px solid #ccc;
  border-radius: 8px;
  transition: border 0.3s ease;
}

input:focus,
select:focus {
  border-color: #2980b9;
  outline: none;
}

input::placeholder {
  color: #888;
}

.form-actions {
  grid-column: 1 / -1;
  text-align: center;
  margin-top: 30px;
}

button {
  background: #2980b9;
  color: white;
  padding: 14px 30px;
  border: none;
  border-radius: 25px;
  font-weight: bold;
  cursor: pointer;
  transition: background 0.3s ease;
}

button:hover {
  background: #1c5980;
}

/* ==========================
   Loader
========================== */
#loader {
  display: none;
  margin: 20px auto;
  border: 6px solid #f3f3f3;
  border-top: 6px solid #3498db;
  border-radius: 50%;
  width: 40px;
  height: 40px;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* ==========================
   Result Box
========================== */
#result {
  margin-top: 25px;
  text-align: center;
  font-size: 1.2em;
  font-weight: bold;
  display: none;
  transition: all 0.5s ease-in-out;
}
<style>

</head>
<body>
  <div class="form-container">
    <h2>Check Your Health Risk</h2>
    <form id="predictionForm" class="form-grid">
      <div>
        <label for="diabetes">Diabetes</label>
        <select id="diabetes"><option value="1">Yes</option><option value="0">No</option></select>
      </div>
      <div>
        <label for="medication">Medication</label>
        <select id="medication"><option value="1">Yes</option><option value="0">No</option></select>
      </div>
      <div>
        <label for="stress">Stress (1-10)</label>
        <input type="number" id="stress" min="1" max="10">
      </div>
      <div>
        <label for="sodium">Sodium</label>
        <input type="number" id="sodium" placeholder = "Normal: 135mg - 145mg">
      </div>
      <div>
        <label for="dietType">Diet Type</label>
        <select id="dietType">
          <option value="0">Vegetarian</option>
          <option value="1">Non-Vegetarian</option>
          <option value="2">Vegan</option>
        </select>
      </div>
      <div>
  <label for="bmi">BMI
    <span id="bmiTooltip" style="cursor: help;" title="BMI Category: Will be shown after prediction">üõà</span>
  </label>
  <input type="number" id="bmi" step="0.1" placeholder="Normal: 18.5 - 24.9">
</div>

      <div>
        <label for="fiber">Fiber Intake</label>
        <input type="number" id="fiber" placeholder = "General: 25gm - 30gm">
      </div>
      <div>
        <label for="exercise">Exercise Level (1-5)</label>
        <input type="number" id="exercise" min="1" max="5">
      </div>
      <div>
        <label for="age">Age</label>
        <input type="number" id="age">
      </div>
      <div class="form-actions">
        <button type="submit">Predict</button>
      </div>
    </form>
    <div id="loader"></div>
    <div id="result"></div>
  </div>

  <script>
// ========================
// Theme Toggle Button üåô/‚òÄÔ∏è
// ========================
const toggleButton = document.getElementById("themeToggle");
toggleButton.addEventListener("click", () => {
  document.body.classList.toggle("dark-mode");
  toggleButton.textContent = document.body.classList.contains("dark-mode") ? "‚òÄÔ∏è" : "üåô";
});

// ========================
// Handle Prediction Form Submit
// ========================
document.getElementById("predictionForm").addEventListener("submit", function (e) {
  e.preventDefault();

  const features = [
    +document.getElementById("diabetes").value,
    +document.getElementById("medication").value,
    +document.getElementById("stress").value,
    +document.getElementById("sodium").value,
    +document.getElementById("dietType").value,
    +document.getElementById("bmi").value,
    +document.getElementById("fiber").value,
    +document.getElementById("exercise").value,
    +document.getElementById("age").value
  ];

  const loader = document.getElementById("loader");
  const resultBox = document.getElementById("result");

  if (features.some(f => isNaN(f))) {
    alert("Please fill all fields correctly.");
    loader.style.display = "none";
    return;
  }

  loader.style.display = "block";
  resultBox.style.display = "none";

  fetch("/predict", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ features })
  })
    .then(res => res.json())
    .then(data => {
      loader.style.display = "none";

      // Show BMI category in tooltip
      const bmiValue = features[5];
      let bmiCategory = "Unknown";

      if (bmiValue < 18.5) bmiCategory = "Underweight";
      else if (bmiValue < 25) bmiCategory = "Normal weight";
      else if (bmiValue < 30) bmiCategory = "Overweight";
      else bmiCategory = "Obese";

      document.getElementById("bmiTooltip").title = `BMI Category: ${bmiCategory}`;

      // Prediction result message
      const prediction = parseInt(data.prediction);
      const message = prediction === 1
        ? "‚ö†Ô∏è High Health Risk! Consult a doctor."
        : "‚úÖ Low Health Risk. Keep up the good habits!";

      // Show modal with message and tips
      document.getElementById("modalMessage").innerHTML = `
        <p style="font-size: 18px; margin-bottom: 10px;">${message}</p>
        <ul style="padding-left: 20px; text-align: left;">
          ${data.tips.map(tip => `<li>${tip}</li>`).join('')}
        </ul>
      `;
      document.getElementById("resultModal").style.display = "flex";
    })
    .catch(error => {
      console.error("Error:", error);
      loader.style.display = "none";
      resultBox.textContent = "‚ö†Ô∏è Error occurred. Try again later.";
      resultBox.style.color = "#e67e22";
      resultBox.style.display = "block";
    });
});

// ========================
// Close Modal
// ========================
function closeModal() {
  document.getElementById("resultModal").style.display = "none";
}
</script>




<div id="resultModal" class="modal">
  <div class="modal-content">
    <span class="close-btn" onclick="closeModal()">&times;</span>
    <p id="modalMessage"></p>
    
  </div>
  

</div>
<button id="themeToggle" title="Toggle Dark/Light Mode">üåô</button>


</body>
</html>
